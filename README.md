# MongoDB Atlas API Server

Простий та гнучкий REST API сервер для взаємодії з MongoDB Atlas. Надає CRUD-інтерфейс для роботи з будь-якими колекціями в MongoDB через HTTP-запити.

## Можливості

- **Динамічні колекції**: Працює з будь-якою колекцією через параметр в URL
- **Повний CRUD-функціонал**: Створення, читання, оновлення та видалення документів
- **Пагінація**: Підтримка параметрів `page` і `limit`
- **Сортування**: Підтримка параметрів `sortBy` і `sortOrder`
- **Гнучка фільтрація**: Підтримка складних фільтрів, включно з MongoDB операторами
- **Мінімалістичний код**: Простий та зрозумілий код в одному файлі

## Встановлення

1. Клонуйте репозиторій:
   ```bash
   git clone https://github.com/nonkor/mini-mongodb-api.git
   cd mini-mongodb-api
   ```

2. Встановіть залежності:
   ```bash
   npm install
   ```

3. Налаштуйте параметри підключення до MongoDB в `app.js`:
   ```javascript
   const uri = "mongodb+srv://<username>:<password>@<your-cluster>.mongodb.net/<dbname>?retryWrites=true&w=majority";
   const dbName = "mydb"; // Назва вашої бази даних
   ```

4. Запустіть сервер:
   ```bash
   node app.js
   ```

## API Маршрути

### Отримання документів з колекції
```
GET /api/:collection
```
**Параметри запиту:**
- `page`: номер сторінки (за замовчуванням 1)
- `limit`: розмір сторінки (за замовчуванням 10)
- `sortBy`: поле для сортування (за замовчуванням "_id")
- `sortOrder`: порядок сортування ("asc" або "desc", за замовчуванням "asc")
- Будь-які інші параметри використовуються як фільтри

**Приклади:**
- `/api/users?page=2&limit=20` - друга сторінка користувачів, 20 на сторінку
- `/api/products?price[$gte]=100&price[$lte]=200` - продукти з ціною 100-200
- `/api/listings?property_type=Apartment&bedrooms=2` - апартаменти з двома спальнями

### Отримання документа за ID
```
GET /api/:collection/:id
```

### Створення документа
```
POST /api/:collection
```
У тілі запиту передається JSON з даними документа.

### Оновлення документа
```
PUT /api/:collection/:id
```
У тілі запиту передається JSON з полями для оновлення.

### Видалення документа
```
DELETE /api/:collection/:id
```

## Особливості фільтрації

API підтримує різноманітні варіанти фільтрації:

### Точне порівняння
```
GET /api/users?age=25
```

### Використання MongoDB операторів
```
GET /api/products?price[$gte]=50&price[$lte]=100
```

### Фільтрація за масивами
```
GET /api/listings?amenities=Wifi
```

## Відповіді API

### Успішні відповіді

При отриманні списку документів:
```json
{
  "data": [...],
  "meta": {
    "total": 100,
    "page": 1,
    "limit": 10,
    "totalPages": 10,
    "hasNextPage": true,
    "hasPrevPage": false
  }
}
```

При отриманні окремого документа:
```json
{
  "_id": "60a1b2c3d4e5f6g7h8i9j0",
  "name": "Приклад документа",
  ...
}
```

### Помилки

```json
{
  "error": "Повідомлення про помилку"
}
```

## Тестування API

Для тестування API можна використовувати Postman. Готова колекція запитів доступна у файлі `MongoDB_API_Collection.json`.

## Безпека

Цей API сервер розроблений як мінімалістичне рішення. Для використання в продакшн-середовищі рекомендується додати:

- Автентифікацію та авторизацію
- Валідацію вхідних даних
- HTTPS
- Обмеження частоти запитів
- Журналювання запитів

## Ліцензія

MIT